<div class="container mx-auto px-4 md:py-16 py-6 md:mb-16">
  <div class="md:flex items-center justify-between">
    <h1 class="mb:mb-0 mb-6 text-4xl font-semibold font-heading text-zinc-900 dark:text-zinc-100 tracking-tight">Agreements</h1>
    <% if current_user.admin? || current_user.landlord? %>
      <div class="md:flex items-center md:space-x-6">
        <%= link_to "Create Agreement", new_agreement_path, class: "btn btn-primary md:mt-0 mt-6" %>
      </div>
    <% end %>
  </div>

  <div class="my-6 font-heading" data-controller="tabs"
    data-tabs-active-tab="border-b border-primary-600 inline-block bg-white text-primary-600 dark:bg-zinc-700 dark:text-white dark:border-primary-400 rounded-t">

    <%= render 'table_nav' %>

    <!-- All Agreements -->
    <div class="hidden p-4" data-tabs-target="panel">
      <div class="overflow-visible">
        <table class="w-full text-left text-sm min-w-full border-collapse">
          <%= render 'table_header' %>
          <tbody class="text-zinc-800 divide-y divide-zinc-200/80 dark:divide-zinc-700">
          <% @agreements.each do |agreement| %>
              <%= render 'table_rows', agreement: agreement %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Current Agreements-->
    <div class="p-4" data-tabs-target="panel">
      <div class="overflow-x-auto">
        <table class="w-full text-left text-sm min-w-full border-collapse">
          <%= render 'table_header' %>
          <tbody class="text-zinc-800 divide-y divide-zinc-200/80 dark:divide-zinc-700">
           <% @current_agreements.each do |agreement| %>
              <%= render 'table_rows', agreement: agreement %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Upcoming Agreements for Renewal-->
    <div class="p-4" data-tabs-target="panel">
      <div class="overflow-x-auto">
        <table class="w-full text-left text-sm min-w-full border-collapse">
          <%= render 'table_header' %>
          <tbody class="text-zinc-800 divide-y divide-zinc-200/80 dark:divide-zinc-700">
           <% @upcoming_renewals.each do |agreement| %>
              <%= render 'table_rows', agreement: agreement %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Expired Agreements -->
    <div class="hidden p-4" data-tabs-target="panel">
       <div class="overflow-x-auto">
        <table class="w-full text-left text-sm min-w-full border-collapse">
          <%= render 'table_header' %>
          <tbody class="text-zinc-800 divide-y divide-zinc-200/80 dark:divide-zinc-700">
              <% @expired_agreements.each do |agreement| %>
              <%= render 'table_rows', agreement: agreement %>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>